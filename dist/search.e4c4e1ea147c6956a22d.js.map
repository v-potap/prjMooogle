{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/api-service.js","webpack:///./src/js/search.js"],"names":["MovieDBService","constructor","storage","query","movieDB","apiKey","page","discover","genres","search","region","language","sortBy","getInfoStr","getInfo","infoItems","response","fetch","getSearchStr","json","results","err","console","log","getGenresStr","getGenres","setPage","setResource","resource","setStorage","setSortBy","setQuery","localStorage","getItem","Search","refs","searchForm","document","querySelector","input","modalform","first_button","overlay","closeModalBtn","addEventListener","searchMovieHandle","bind","openModal","closeModal","e","preventDefault","classList","add","window","handleButtonPress","focus","remove","removeEventListener","code","form","currentTarget","inputtwo","elements","mdsearch","inputValue","value","movieDBService","setItem","i","location","pathname","evt","MouseEvent","bubbles","cancelable","view","dispatchEvent"],"mappings":"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","file":"search.e4c4e1ea147c6956a22d.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","class MovieDBService {\r\n  constructor(storage, query) {\r\n    this.movieDB = \"https://api.themoviedb.org/3/\";\r\n    this.apiKey = \"442f08ed580949109afb21f8d78ec790\";\r\n    this.page = 1;\r\n    this.discover = \"discover/\";\r\n    this.genres = \"genre/\";\r\n    this.search = \"search/\";\r\n    this.storage = storage ? storage : \"movie\";\r\n    this.region = \"US\";\r\n    this.language = \"en-US\";\r\n    this.sortBy = \"popularity.desc\";\r\n    this.query = query;\r\n  }\r\n\r\n  getInfoStr() {\r\n    return (\r\n      `${this.movieDB}` +\r\n      `${this.discover}` +\r\n      `${this.storage}` +\r\n      `?` +\r\n      `api_key=${this.apiKey}&` +\r\n      `language=en-US&` +\r\n      `region=US&` +\r\n      (this.sortBy === \"none\" ? `` : `sort_by=${this.sortBy}&`) +\r\n      `page=${this.page}`\r\n    );\r\n  }\r\n\r\n  async getInfo() {\r\n    let infoItems = [];\r\n    try {\r\n      const response = await fetch(\r\n        this.query === \"\" ? this.getInfoStr() : this.getSearchStr()\r\n      );\r\n      const json = await response.json();\r\n      infoItems = json.results;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    return infoItems;\r\n  }\r\n\r\n  getGenresStr() {\r\n    return (\r\n      `${this.movieDB}` +\r\n      `${this.genres}` +\r\n      `${this.storage}` +\r\n      `/list?` +\r\n      `api_key=${this.apiKey}&` +\r\n      `language=en-US`\r\n    );\r\n  }\r\n\r\n  async getGenres() {\r\n    let infoItems = [];\r\n    try {\r\n      const response = await fetch(this.getGenresStr());\r\n      const json = await response.json();\r\n      infoItems = json.genres;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    return infoItems;\r\n  }\r\n\r\n  getSearchStr() {\r\n    return (\r\n      `${this.movieDB}` +\r\n      `${this.search}` +\r\n      `${this.storage}` +\r\n      `?` +\r\n      `api_key=${this.apiKey}&` +\r\n      `language=en-US&` +\r\n      `query=${this.query}&` +\r\n      (this.sortBy === \"none\" ? `` : `sort_by=${this.sortBy}&`) +\r\n      `page=${this.page}`\r\n    );\r\n  }\r\n\r\n  setPage(page) {\r\n    this.page = page;\r\n  }\r\n\r\n  setResource(resource) {\r\n    this.resource = resource;\r\n  }\r\n\r\n  setStorage(storage) {\r\n    this.storage = storage;\r\n  }\r\n\r\n  setSortBy(sortBy) {\r\n    this.sortBy = sortBy;\r\n  }\r\n\r\n  setQuery(query) {\r\n    this.query = query;\r\n  }\r\n}\r\n\r\nexport default new MovieDBService(\r\n  localStorage.getItem(\"activeFavorities\"),\r\n  localStorage.getItem(\"queryString\") ? localStorage.getItem(\"queryString\") : \"\"\r\n);\r\n","import movieDBService from \"./api-service\";\r\nclass Search {\r\n  constructor() {\r\n    this.refs = {};\r\n    this.refs.searchForm = document.querySelector(\"#modal-search-form\");\r\n    this.refs.input = document.querySelector(\"#modal-search-input\");\r\n    this.refs.modalform = document.querySelector(\".modal-form\");\r\n    this.refs.first_button = document.querySelector(\".header__search\");\r\n    this.refs.overlay = document.querySelector(\".modal-overlay\");\r\n    this.refs.closeModalBtn = document.querySelector(\r\n      'button[data-action=\"close-modal-form\"]'\r\n    );\r\n\r\n    this.refs.searchForm.addEventListener(\r\n      \"submit\",\r\n      this.searchMovieHandle.bind(this)\r\n    );\r\n    this.refs.first_button.addEventListener(\"click\", this.openModal.bind(this));\r\n    this.refs.overlay.addEventListener(\"click\", this.closeModal.bind(this));\r\n    this.refs.closeModalBtn.addEventListener(\r\n      \"click\",\r\n      this.closeModal.bind(this)\r\n    );\r\n  }\r\n\r\n  openModal(e) {\r\n    e.preventDefault();\r\n    this.refs.modalform.classList.add(\"is-open\");\r\n    this.refs.overlay.classList.add(\"is-open\");\r\n    window.addEventListener(\"keydown\", this.handleButtonPress.bind(this));\r\n    this.refs.input.focus();\r\n  }\r\n\r\n  closeModal() {\r\n    this.refs.modalform.classList.remove(\"is-open\");\r\n    this.refs.overlay.classList.remove(\"is-open\");\r\n    window.removeEventListener(\"keydown\", this.handleButtonPress.bind(this));\r\n  }\r\n\r\n  handleButtonPress(e) {\r\n    if (e.code !== \"Escape\") {\r\n      return;\r\n    }\r\n    this.closeModal();\r\n  }\r\n\r\n  async searchMovieHandle(e) {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const inputtwo = form.elements.mdsearch;\r\n    const inputValue = inputtwo.value;\r\n    inputtwo.value = \"\";\r\n    movieDBService.setQuery(inputValue);\r\n    localStorage.setItem(\"queryString\", inputValue);\r\n    const i = localStorage.getItem(\"queryString\");\r\n    this.closeModal();\r\n\r\n    if(window.location.pathname !== '/index.html') {\r\n      window.location.pathname = '/index.html';\r\n    }\r\n    const storage = localStorage.getItem(\"activeFavorities\");\r\n    if (storage !== \"favorites\") {\r\n      const evt = new MouseEvent(\"click\", {\r\n        bubbles: true,\r\n        cancelable: true,\r\n        view: window\r\n      });\r\n      if (storage === \"tv\") {\r\n        document.querySelector(\"#radio-series\").dispatchEvent(evt);\r\n      } else if (storage === \"movie\") {\r\n        document.querySelector(\"#radio-movies\").dispatchEvent(evt);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nnew Search();\r\n"],"sourceRoot":""}